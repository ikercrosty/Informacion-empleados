{% extends "layout.html" %}
{% block title %}Ficha{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="card shadow-sm mb-4 border-0">
    <div class="card-body d-flex align-items-center justify-content-between gap-3">
      <div>
        <h3 class="mb-0">FICHA DEL PERSONAL</h3>
        <div class="text-muted small mt-1">Selecciona un empleado para ver su ficha</div>
      </div>

      <div class="d-flex flex-column align-items-end gap-2">
        <select id="empleadoSelect" class="form-select form-select-sm" style="min-width:320px">
          <option value="">Cargando lista de empleados...</option>
        </select>

        <img id="fotoEmpleado" src="{{ url_for('static', filename='placeholder.png') }}" alt="Foto" style="width:120px;height:140px;object-fit:cover;border:1px solid #ddd;border-radius:4px;">
      </div>
    </div>
  </div>

  <form id="fichaForm" class="card shadow-sm border-0 mb-4">
    <div class="card-body p-4">

      <h5 class="mb-3">IDENTIFICACIÓN</h5>
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">Numero de DPI</label>
          <input id="dpi" name="Numero de DPI" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Nombre</label>
          <input id="nombre" name="Nombre" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Apellidos</label>
          <input id="apellidos" name="Apellidos" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Apellidos de casada</label>
          <input id="apellidos_casada" name="Apellidos de casada" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Estado Civil</label>
          <input id="estado_civil" name="Estado Civil" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Nacionalidad</label>
          <input id="nacionalidad" name="Nacionalidad" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Fecha de nacimiento</label>
          <input id="fecha_nacimiento" name="Fecha de nacimiento" type="date" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Lugar de nacimiento</label>
          <input id="lugar_nacimiento" name="Lugar de nacimiento" class="form-control form-control-sm" />
        </div>
      </div>

      <hr class="my-4">

      <h5 class="mb-3">DOMICILIO</h5>
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Dirección del Domicilio</label>
          <input id="direccion" name="Dirección del Domicilio" class="form-control form-control-sm" />
        </div>
        <div class="col-md-3">
          <label class="form-label">Departamento</label>
          <input id="departamento" name="Departamento" class="form-control form-control-sm" />
        </div>
        <div class="col-md-3">
          <label class="form-label">Numero de Telefono</label>
          <input id="telefono" name="Numero de Telefono" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Correo Electronico</label>
          <input id="correo" name="Correo Electronico" type="email" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Religión</label>
          <input id="religion" name="Religión" class="form-control form-control-sm" />
        </div>
      </div>

      <hr class="my-4">

      <h5 class="mb-3">DATOS LABORALES</h5>
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">Puesto de trabajo</label>
          <input id="puesto" name="Puesto de trabajo" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Tipo de contrato</label>
          <input id="tipo_contrato" name="Tipo de contrato" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Jornada laboral</label>
          <input id="jornada" name="Jornada laboral" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Duración del trabajo</label>
          <input id="duracion" name="Duración del trabajo" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Fecha de inicio laboral</label>
          <input id="fecha_inicio" name="Fecha de inicio laboral" type="date" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Dias Laborales</label>
          <input id="dias_laborales" name="Dias Laborales" type="number" class="form-control form-control-sm" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Numero de Afiliación del IGGS</label>
          <input id="iggs" name="Numero de Afiliación del IGGS" class="form-control form-control-sm" />
        </div>
      </div>

      <div class="mt-4 text-end">
        <button type="button" id="btnClear" class="btn btn-outline-secondary btn-sm">Limpiar</button>
      </div>
    </div>
  </form>
</div>

<!-- Configuración que necesita main.js -->
<script>
  window.__FICHA_CONFIG = {
    placeholder: "{{ url_for('static', filename='placeholder.png') }}",
    apiEmpleados: "/api/empleados",
    apiEmpleadoBase: "/api/empleado/",
    apiFotoBase: "/api/foto/"
  };
</script>

<script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %}
